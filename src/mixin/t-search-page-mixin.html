<link rel="import" href="./t-page-mixin.html">

<script>
(function () {
    'use strict';

    /* @polymerMixin */

    var TSearchPageMixin = function TSearchPageMixin(superClass) {

        return function (_TPageMixin) {
            babelHelpers.inherits(_class, _TPageMixin);

            function _class() {
                babelHelpers.classCallCheck(this, _class);
                return babelHelpers.possibleConstructorReturn(this, (_class.__proto__ || Object.getPrototypeOf(_class)).call(this));
            }

            babelHelpers.createClass(_class, [{
                key: 'onSearch',

                /*
                 * <p>Event handler method called when `search` event is fired</p>
                 */
                value: function onSearch(e) {
                    this.searchedData = e.detail;
                    this._showPageLoader();
                }

                /*
                 * <p>Event handler method called when `search-api-success` event is fired</p>
                 */

            }, {
                key: 'onSearchSuccess',
                value: function onSearchSuccess(e) {
                    this._hidePageLoader();

                    if (!e.detail) {
                        console.error('something blew up!');
                        return;
                    }
                    this.searchId = e.detail.searchId;

                    this.dispatchEvent(new CustomEvent("search-success", {
                        detail: {
                            product: this.productName,
                            data: this.searchedData,
                            searchId: e.detail.searchId
                        },
                        bubbles: true,
                        composed: true
                    }));
                }

                /*
                 * <p>Event handler method called when `search-api-error` event is fired</p>
                 */

            }, {
                key: 'onSearchError',
                value: function onSearchError(e) {
                    this._hidePageLoader();

                    this.dispatchEvent(new CustomEvent("search-error", {
                        detail: e.detail,
                        bubbles: true,
                        composed: true
                    }));
                }
            }, {
                key: '_showPageLoader',
                value: function _showPageLoader() {
                    this.pageLoader = true;
                }
            }, {
                key: '_hidePageLoader',
                value: function _hidePageLoader() {
                    this.pageLoader = false;
                }
            }], [{
                key: 'properties',
                get: function get() {
                    return {
                        productName: String,

                        searchId: {
                            type: String,
                            notify: true
                        },
                        // Searched Data of the component.
                        searchedData: {
                            type: Object,
                            notify: true
                        }
                    };
                }
            }]);
            return _class;
        }(TPageMixin(superClass));
    };
    window.TSearchPageMixin = TSearchPageMixin;
})();</script>